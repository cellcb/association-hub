### 共享认证 API - 供其他 HTTP 文件使用
### 基础配置
@baseUrl = {{baseUrl}}
@iamBase = {{baseUrl}}/api/iam
@contentType = {{contentType}}

### 共享登录 - 获取Token
# @name login
POST {{iamBase}}/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "123456",
  "tenantId": 1
}

> {%
    client.global.set("accessToken", response.body.data.accessToken);
    client.global.set("refreshToken", response.body.data.refreshToken);
%}

###

### 刷新Token
# @name refresh
POST {{iamBase}}/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

> {%
    client.global.set("accessToken", response.body.data.accessToken);
%}

###

### 获取用户信息
GET {{iamBase}}/auth/userinfo
Authorization: Bearer {{accessToken}}

###

### 登出
POST {{iamBase}}/auth/logout
Authorization: Bearer {{accessToken}}
